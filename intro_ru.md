# SDD (Spec-Driven Development) — упрощённый алгоритм и стартёр

Цель: свести ручные действия к минимуму и не усложнять. Здесь только то, что действительно нужно, плюс лёгкая автоматизация для генерации промптов.

Ключевая цепочка:
Задача → Описание → Исследование → Архитектура → Правила → Агент → Тикеты → Код

Где автоматизируем: генерация промптов и структура файлов. Где вручную: веб-ресерч (браузер), запуск промптов в любимом CLI-агенте (Q, Qwen, Codex, Gemini, Cursor), перенос результатов в файлы.

—

Что лежит в этом репозитории
- `templates/`: простые шаблоны промптов (идеация, ресерч, архитектор, кодинг-правила, агент).
- `bin/sdd-scaffold`: создаёт каркас задачи в `tasks/<task>`.
- `bin/sdd-prompts`: генерирует готовые к вставке промпты с подстановкой контекста.
- `templates/adapt_prompt.md`: шаблон для «переписать промпт под проект» (при необходимости).
- `gh_relevant_project/spec-kit`:参考‑проект от GitHub; можно брать идеи, но мы держим процесс проще.

Минимальная структура новой задачи
```
tasks/<task>/
├── config.json                # имя, стек, домен, год
├── input/
│   └── project.md             # краткое описание (вручную)
├── research/
│   └── best_practices.md      # результат ресерча (вручную вставить)
├── spec/
│   ├── architect.md           # итоговая архитектура (вручную вставить)
│   └── coding_rules.md        # итоговые правила (вручную вставить)
├── prompts/                   # готовые промпты на каждый шаг
└── agent/
    └── agent.md               # собранный агентский промпт (опц.)
```

—

Алгоритм SDD (коротко)
0) Ввод задачи
- Вручную запиши описание в `tasks/<task>/input/project.md`.

1) Придумать решение (Task Solver / Ideation)
- Сгенерируй промпты: `python bin/sdd-prompts tasks/<task>`.
- Используй `prompts/00_task_solver.prompt.md` или `prompts/00_solution_ideation.prompt.md`.
- Сохрани результат в `spec/solution_plan.md` (по желанию) — будет основой для тикетов.

2) Ресерч → Best Practices и стек
- Открой `prompts/01_research.prompt.md`, запусти в AI, делай веб‑поиск в браузере при необходимости.
- Вставь результат в `research/best_practices.md`.

3) Архитектор
- После п.2 снова: `python bin/sdd-prompts tasks/<task>` (чтобы архитектурный и агентский промпт подхватили best_practices).
- Открой `prompts/02_architect.prompt.md`, запусти в AI.
- Вставь результат в `spec/architect.md`.

4) Кодинговые правила
- Открой `prompts/03_coding_rules.prompt.md`, запусти в AI.
- Вставь результат в `spec/coding_rules.md`.

5) Агент
- Снова: `python bin/sdd-prompts tasks/<task>` — теперь будет собран контекст (описание, best practices, архитектура, правила) в один промпт.
- Открой `prompts/04_agent.prompt.md`, запусти в AI → результат (если нужен постоянный) положи в `agent/agent.md`.

6) Тикеты (опционально)
- Из `spec/solution_plan.md` и `spec/architect.md` сделай backlog. Можно попросить агента по готовому контексту.
- Дальше работаешь по тикетам с тем же агентом, соблюдая правила и архитектуру.

—

Что автоматизировано и что вручную
- Авто: создание структуры задачи (`bin/sdd-scaffold`), генерация промптов с подстановкой контекста (`bin/sdd-prompts`).
- Вручную: веб‑поиск (браузер), запуск промптов в выбранном CLI‑агенте, перенос результатов в `research/`, `spec/`, `agent/`.
- Опционально: `templates/adapt_prompt.md` для быстрого «переписать шаблон под проект».

—

Быстрый старт
1) Создай каркас задачи
```
bash bin/sdd-scaffold my-website --stack "Python/FastAPI" --domain web
```

2) Заполни описание
- Отредактируй `tasks/my-website/input/project.md` (цели, ограничения, критерии готовности).

3) Сгенерируй промпты
```
python bin/sdd-prompts tasks/my-website
```

4) Идеация решения
- Открой `prompts/00_solution_ideation.prompt.md` → вставь в AI → сохрани результат в `spec/solution_plan.md` (опц.).

5) Ресерч
- `prompts/01_research.prompt.md` → AI + браузер → результат в `research/best_practices.md`.

6) Архитектор
```
python bin/sdd-prompts tasks/my-website  # чтобы подтянуть best_practices
```
- `prompts/02_architect.prompt.md` → AI → `spec/architect.md`

7) Правила кодирования
- `prompts/03_coding_rules.prompt.md` → AI → `spec/coding_rules.md`

8) Агент
```
python bin/sdd-prompts tasks/my-website
```
- `prompts/04_agent.prompt.md` → AI → `agent/agent.md` (если нужен постоянный файл агента)

9) Дальше по тикетам
- Из `solution_plan.md`/`architect.md` сформируй backlog (вручную или через AI) и работай агентом по нему.

—

Примечания и советы
- Можно повторно запускать `python bin/sdd-prompts` — он подставит текущее содержимое `best_practices`/`architect`/`coding_rules` в агентский промпт.
- Если нужно перегенерить/адаптировать шаблон, `templates/adapt_prompt.md` помогает переписать промпт под другой стек/домен 1:1.
- Спокойно комбинируй этот лёгкий флоу с идеями из `gh_relevant_project/spec-kit` — здесь оставлен только «скелет», без тяжёлого CLI.

—

Мини‑FAQ
- Почему без интеграции с конкретным API LLM? Потому что ты используешь разные CLI‑агенты. Проще генерить «готовые к вставке» промпты.
- Можно ли расширить автоматизацию? Да — добавить парсинг зависимостей, авто‑тикетизацию и т.д., но базовый флоу лучше оставить простым.
- Что делать, если агент не видит файлы? В `prompts/04_agent.prompt.md` мы инлайним содержимое ключевых файлов, чтобы его можно было прямо вставить в сессию.

Готово. Пользуйся этой базой и наращивай автоматизацию по мере необходимости — не усложняя ядро процесса.
